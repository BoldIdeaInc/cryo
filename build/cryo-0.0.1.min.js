/*
 The MIT license.
 @copyright Copyright (c) 2010 Skookum, skookum.com
*/
(function(){Cryo={stringify:function(e){function h(a){if("object"===typeof a){b.indexOf(a);-1===b.indexOf(a)&&b.push(a);for(var c in a)a.hasOwnProperty(c)&&h(a[c])}}function g(a){return"object"===typeof a?null===a?null:"_jsref_objects["+b.indexOf(a)+"]":Infinity===a?"_jsref_infinity":"function"===typeof a?"_jsref_function"+a.toString():a}var b=[];h(e);for(var f=Array(b.length),d=b.length;d--;){var a=b[d],j=a instanceof Array?[]:{},c;for(c in a)a.hasOwnProperty(c)&&(j[c]="undefined"===typeof a[c]?
"_jsref_undefined":g(a[c]));f[d]=j}return JSON.stringify({root:g(e),objects:f})},parse:function(e){function h(a){if("string"===typeof a){if("_jsref_objects["===a.slice(0,15))return a=a.slice(15,-1),g[a];if("_jsref_infinity"===a.slice(0,15))return Infinity;if("_jsref_undefined"===a.slice(0,16))return;if("_jsref_function"===a.slice(0,15)){a=a.slice(16);var b=a.indexOf("(")+1,c=a.indexOf(")",b),b=a.slice(b,c),c=a.indexOf("{")+1,d=a.lastIndexOf("}")-1;a=a.slice(c,d);return new Function(b,a)}}return a}
e=JSON.parse(e);for(var g=e.objects,b=g.length;b--;){var f=g[b],d;for(d in f)f.hasOwnProperty(d)&&(f[d]=h(f[d]))}return h(e.root)}};"undefined"!==typeof define&&define.amd?define("Cryo",[],function(){return Cryo}):"undefined"!==typeof module&&module.exports?module.exports=Cryo:this.Cryo=Cryo})();
